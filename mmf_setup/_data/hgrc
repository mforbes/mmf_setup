[ui]
ccommit.verbose=true

[extensions]
color=
graphlog=
histedit=
rebase=
record=
shelve=
strip=
mmf_setup.nbclean=$MMF_SETUP/nbclean.py

[hooks]
# This hook adds "%include ../.hgrc" to .hg/hgrc if the .hgrc file exists in
# the top level.  This allows one to store a set of paths for example.
# See http://stackoverflow.com/a/24195392/1088938
update = if [ -e .hgrc ] && touch .hg/hgrc \
                         && ! grep -q '%include \.\./\.hgrc' .hg/hgrc; then \
           echo '%include ../.hgrc' >> .hg/hgrc; \
         fi

[alias]
lga = glog --style=${MMF_SETUP}/_data/hgthemes/map-cmdline.lg -l20

# The following provide options for commiting only clean versions of
# jupyter notebooks.  They require the nbstripout package:
# pip install --index-url=https://bitbucket.org/mforbes/mypi/ nbstripout


#cstatus = !hg nbclean && { hg status "$@"; hg nbrestore; }
#cdiff   = !hg nbclean && { hg diff   "$@"; hg nbrestore; }
cediff  = !hg nbclean && { hg ediff  "$@"; hg nbrestore; }
crecord = !hg nbclean && {
    hg record "$@"
    hg bookmark --delete _c_parent
    hg tag -fl _c_parent 2> /dev/null
    hg nbrestore
    hg _setparent _c_parent 2> /dev/null
    hg tag -l --remove _c_parent 2> /dev/null
  }
